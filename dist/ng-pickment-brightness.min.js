// pickment v0.9.0, Mikael Tilly, MIT License
angular.module("pickment-brightness",["pickment"]).run(["pickmentService",function(a){var b=function(a){var b={"-moz-user-select":"-moz-none","-khtml-user-select":"none","-webkit-user-select":"none","-o-user-select":"none","user-select":"none"},c={};this.elements={preview:{display:function(a){return a.preview},getSize:function(a){return{width:Math.max(16,Math.round(a/8)),height:a}},createElement:function(a){return angular.element("<div />").css(angular.extend({display:"inline-block",width:a.width+"px",height:a.height+"px",cursor:"pointer"},b))},createMarker:function(){return null},updateMarker:function(){return null},render:function(a,b){angular.element(a).css("background-color",b.toRgbString())},getColor:function(a,b,c){return c},getPosition:null,onSelect:null,onPick:function(a){a.close()}},primary:{display:function(){return!0},getSize:function(a){return{width:a,height:a}},createElement:function(a){return angular.element('<canvas width="'+a.width+'" height="'+a.height+'"></canvas>').css(angular.extend({cursor:"crosshair"},b))},createMarker:function(){return angular.element("<div></div>").css({"background-color":"transparent",margin:"-2.5px 0 0 -2.5px",border:"1px solid white","border-radius":"50%","box-shadow":"0 0 1px black",height:"5px",width:"5px",position:"absolute",top:"0px",left:"0px","z-index":100002,display:"block","box-sizing":"border-box","pointer-events":"none"})},updateMarker:function(a,b,d,e){return c.primary=a,b.css({left:a.x*d.width+d.left-e.left+"px",top:a.y*d.height+d.top-e.top+"px"})},render:function(a,b){for(var c=a.getContext("2d"),d=c.canvas.clientWidth,e=c.canvas.clientHeight,f=c.createLinearGradient(0,0,d,0),g=c.createLinearGradient(0,0,0,e),h=0,i=60;360>=h;h+=i)f.addColorStop(h/360,tinycolor({h:h,s:1,v:b.toHsv().v,a:1}).toRgbString());c.fillStyle=f,c.fillRect(0,0,d,e),b=tinycolor({h:0,s:0,v:b.toHsv().v}),g.addColorStop(0,b.setAlpha(0).toRgbString()),g.addColorStop(1,b.setAlpha(1).toRgbString()),c.fillStyle=f,c.fillRect(0,0,d,e),c.fillStyle=g,c.fillRect(0,0,d,e)},getColor:function(a,b,c){return tinycolor({h:360*a,s:1-b,v:c.toHsv().v})},getPosition:function(a){var b=a.toHsv();return{x:b.h/360,y:1-b.s}},onSelect:function(){return["preview","secondary","alpha"]},onPick:null},secondary:{display:function(){return!0},getSize:function(a){return{width:Math.max(16,Math.round(a/8)),height:a}},createElement:function(a){return angular.element('<canvas width="'+a.width+'" height="'+a.height+'"></canvas>').css(angular.extend({cursor:"row-resize"},b))},createMarker:function(){return angular.element("<div></div>").css({"background-color":"rgba(255, 255, 255, .5)","margin-top":"-1px","border-top":"1px solid rgba(0, 0, 0, .5)","border-bottom":"1px solid rgba(0, 0, 0, .5)",height:"1px",width:"1px",position:"absolute",top:"0px",left:"0px","z-index":100003,display:"block","pointer-events":"none"})},updateMarker:function(a,b,c,d){return b.css({width:c.width+"px",left:c.left-d.left+"px",top:a.y*c.height+"px"})},render:function(a,b){var c=a.getContext("2d"),d=c.canvas.clientWidth,e=c.canvas.clientHeight,f=c.createLinearGradient(0,0,0,e);b=b.toHsv(),f.addColorStop(0,tinycolor({h:b.h,s:b.s,v:1,a:1}).toRgbString()),f.addColorStop(1,tinycolor({h:b.h,s:b.s,v:0,a:1}).toRgbString()),c.fillStyle=f,c.fillRect(0,0,d,e)},getColor:function(a,b){return tinycolor({h:360*c.primary.x,s:1-c.primary.y,v:1-b})},getPosition:function(a){return{x:0,y:1-a.toHsv().v}},onSelect:function(){return["preview","primary","alpha"]},onPick:null},alpha:{display:function(a){return a.alpha},getSize:function(a){return{width:Math.max(16,Math.round(a/8)),height:a}},createElement:function(a){return angular.element('<canvas width="'+a.width+'" height="'+a.height+'"></canvas>').css(angular.extend({cursor:"row-resize"},b))},createMarker:function(){return angular.element("<div></div>").css({"background-color":"rgba(255, 255, 255, .5)","margin-top":"-1px","border-top":"1px solid rgba(0, 0, 0, .5)","border-bottom":"1px solid rgba(0, 0, 0, .5)",height:"1px",width:"1px",position:"absolute",top:"0px",left:"0px","z-index":100003,display:"block","pointer-events":"none"})},updateMarker:function(a,b,c,d){return b.css({width:c.width+"px",left:c.left-d.left+"px",top:a.y*c.height+"px"})},render:function(b,c){var d,e=b.getContext("2d"),f=e.canvas.clientWidth,g=e.canvas.clientHeight,h=e.createLinearGradient(0,0,0,g);h.addColorStop(0,c.setAlpha(1).toRgbString()),h.addColorStop(1,c.setAlpha(0).toRgbString()),e.clearRect(0,0,f,g),d=e.createPattern(a,"repeat"),e.fillStyle=d,e.fillRect(0,0,f,g),e.fillStyle=h,e.fillRect(0,0,f,g)},getColor:function(a,b,c){return tinycolor(c).setAlpha(1-b)},getPosition:function(a){return{x:0,y:1-a.getAlpha()}},onSelect:function(){return["preview"]},onPick:null}}};a.getResource("alphaPatternImage").then(function(c){a.registerMode("brightness",new b(c))})}]);